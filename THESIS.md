# Optimizing IoT Cloud Applications for Scalability: Leveraging RPC with Distributed Queues for Seamless Operations

Department of Computing, UFSCar - 2025

Author: Daniel Lombardi

Supervisor: Fredy Jo√£o Valente

---

## ABSTRACT

The rapid expansion of the Internet of Things (IoT) has necessitated the development of robust and scalable cloud applications to manage the vast influx of data and ensure reliable communication between devices. This paper presents a comprehensive study backed by the practical experience gained during the development of large-scale networks with IoT actuators. We begin by exploring the unique challenges posed by IoT ecosystems, including real-time processing implementations and scaling for cloud applications and their difficulties. The study delves into the utilization of in-memory databases, queues and RPC methods to act as shared-memory, creating a vastly scalable distributed system that enables the utilization of traditional scaling methodologies for large MQTT based IoT environments.

## INTRODUCTION

The last decade has witnessed a revolution driven by the Internet of Things (IoT), transforming how we interact with the physical and digital worlds. The proliferation of connected devices, from environmental sensors to industrial actuators, has generated an unprecedented volume of data, opening new frontiers for automation, process optimization, and intelligent decision-making. (MOTTA, R. et al. 2019)

This exponential growth in connected devices and the ensuing data deluge inherently necessitate robust and scalable underlying infrastructure. Cloud computing has emerged as the indispensable backbone for IoT ecosystems, providing the computational power, storage capabilities, and network resources required to ingest, process, analyze, and act upon this vast influx of information. However, the sheer volume, velocity, and variety of data generated by millions, or even billions, of distributed IoT devices present significant challenges for traditional cloud application architectures. Ensuring real-time processing, maintaining low latency, and achieving horizontal scalability to accommodate dynamic workloads become critical factors for the successful deployment and operation of large-scale IoT solutions, especially when considering IoT actuators.

Unlike traditional IoT sensors, which primarily collect and transmit data, IoT actuators introduce a new layer of complexity to these distributed systems. These devices are designed to execute physical actions or trigger processes based on received commands, effectively closing the loop between the digital and physical worlds. Their integration demands not only robust data ingestion and processing capabilities but also rely on components where faulty connections are much more common than on traditional systems. This new paradigm of bidirectional communication and real-time control places unprecedented demands on the scalability, reliability, and architectural design of cloud-based IoT applications, often extending beyond the capabilities of pre-existing system designs focused solely on data collection.

Given the already specific demands of IoT applications, we must also consider the heterogeneity of tasks to be executed. Depending on the type of IoT device and it's function, the data and processing volume can be highly heterogeneous throughout the day. For instance, a smart lighting system might have minimal activity during daylight hours but experience peak command and telemetry traffic at dusk and dawn. Similarly, industrial sensors might burst data during specific operational cycles.

To effectively manage these fluctuating and diverse workloads, cloud computing providers rely on vast data center infrastructures with virtualized resources. They are made available to clients on a pay-as-you-go model, where customers pay according to their resource consumption, this is often offered as managed components such as Kubernetes clusters, load balancers and databases, constituting what is known as Infrastructure as a Service (IaaS). This model's inherent elasticity, particularly the horizontal scalability offered by platforms like Kubernetes, allows for the dynamic allocation and deallocation of resources in response to fluctuating demand, ensuring optimal performance during peak loads while minimizing costs during periods of low activity, making it ideal for modern IoT systems. (POURMAJIDI, W. et al. 2017).

Drawing from practical experience, our study examines a core problem arising from the implementation of an IoT solution in a hardware store, emphasizing the difficulties in achieving real-time processing and effective scaling in a cloud scenario. This problem became acutely evident during the development and deployment of Electronic Shelf Labels (ESLs) in a large-scale hardware store chain in Brazil. This particular implementation presented unique challenges, given the potential for deploying around 50 thousand ESLs per store, across dozens of stores nationwide, leading to a vast IoT ecosystem. We'll dive into the scaling limitations of traditional broker architectures as applied to our specific use case, particularly when managing the bidirectional communication and real-time control demands of large-scale Electronic Shelf Label (ESL) deployments. This includes a detailed examination of how the MQTT protocol, while effective for general load balancing, encounters significant hurdles in maintaining the request-reply pattern necessary for Remote Procedure Calls (RPCs) when horizontal scaling is implemented, as replies can be misrouted to different nodes than their originating requests. We propose and evaluate a novel approach leveraging distributed queues to overcome these architectural constraints, ensuring seamless, scalable, and reliable operations for IoT cloud applications involving actuators.

<!-- To address these multifaceted challenges, a robust IoT cloud application must embody several critical characteristics. Resilience to failures is paramount, ensuring continuous operation even in adverse scenarios, a vital consideration given the distributed nature and potential for faulty connections in IoT actuator systems. Consequently, the primary technical challenge was not just integrating devices, but establishing a resilient and highly scalable backbone capable of overcoming these physical and broker layer limitations to ensure consistent, fault-tolerant, real-time data flow from a massive, distributed network of actuators. Addressing this specific challenge requires a paradigm shift from conventional RPC calls to a new distributed system design that can gracefully handle the lack of traditional partitioning without sacrificing horizontal scaling requirements. (HEIMERDINGER; Weinstock, 1992).

In this study, we'll dive into the scaling limitations of traditional broker architectures as applied to our specific use case, particularly when managing the bidirectional communication and real-time control demands of large-scale Electronic Shelf Label (ESL) deployments. This includes a detailed examination of how the MQTT protocol, while effective for general load balancing, encounters significant hurdles in maintaining the request-reply pattern necessary for Remote Procedure Calls (RPCs) when horizontal scaling is implemented, as replies can be misrouted to different nodes than their originating requests. We propose and evaluate a novel approach leveraging distributed queues to overcome these architectural constraints, ensuring seamless, scalable, and reliable operations for IoT cloud applications involving actuators. -->

<!-- A significant technical hurdle encountered stemmed from the chosen communication protocol: the ESLs communicate via Bluetooth to dedicated gateways (GWs) that themselves are exposed via MQTT. While MQTT works well for general load balancing, it breaks the request-reply pattern needed for RPCs when horizontal scaling is applied, as the reply might go to a different node than the one that sent the request. -->

<!--
The inherent characteristics of a large hardware store environment, however, severely compromised the reliability and range of these Bluetooth signals. This led to the inability for the gateways to consitently maintain stable connections wth large number of ESLs, directly impacting the real-time update capabilities and overall system efficiency. -->

<!-- The presence of numerous metal, glass, wooden, and concrete objects, along with the constant movement of forklifts within the store, created a highly dynamic and challenging radio-frequency landscape. These obstacles led to frequent signal degradation, packet loss, and an inability for the gateways to consistently maintain stable connections with the large number of ESLs, directly impacting the real-time update capabilities and overall system efficiency. -->

<!-- The constant signal degradation and interference in the store's environment meant that device communication frequently required retries via MQTT. This posed a significant challenge for horizontal scalability: due to MQTT's strict round-robin message distribution pattern among subscribed nodes, the node that sent a Remote Procedure Call (RPC) request often did not receive its corresponding reply. This critical issue created a new hurdle for developing a system that was both scalable and reliable. In other words, traditional partioning methods of storing records in exactly one partition (KLEPPMANN, M. 2007, p.199) would not work in scaled-out environments.

The reliance on Bluetooth for ESL communication, while energy-efficient, proved particularly vulnerable to the signal attenuation and interference caused by the store's physical layout and dynamic elements like forklifts. This frequently led to unreliable data transmission and significant delays in real-time updates, preventing the system from achieving its operational goals of dynamic pricing and inventory management. Consequently, the primary technical challenge was not just integrating devices, but establishing a resilient and highly scalable backbone capable of overcoming these physical and broker layer limitations to ensure consistent, fault-tolerant, real-time data flow from a massive, distributed network of actuators. Addressing this specific challenge requires a paradigm shift from conventional RPC calls to a new distributed system design that can gracefully handle the lack of traditional partitioning without sacrificing horizontal scaling requirements. (HEIMERDINGER; Weinstock, 1992). -->
